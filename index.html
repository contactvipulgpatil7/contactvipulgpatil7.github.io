<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vipul G Patil — Portfolio</title>
<meta name="description" content="Vipul G Patil — Senior Data Engineer & Data Professional | Power BI, SQL, ETL, Python Automation." />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-1:#0f1724;
    --bg-2:#071b2e;
    --panel:rgba(255,255,255,0.03);
    --muted:#9fb4c5;
    --accent-a:#ff6b6b;
    --accent-b:#7c5cff;
    --accent-c:#00d4ff;
    --text:#e8f6ff;
    --radius:14px;
    --nav-h:72px;
    --card-pad:22px;
  }
  body.light{
    --bg-1:#f5f8fb;
    --bg-2:#ffffff;
    --panel:rgba(10,20,30,0.03);
    --muted:#475569;
    --text:#071022;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    background:
      radial-gradient(800px 400px at 6% 8%, rgba(124,92,255,0.08), transparent 12%),
      linear-gradient(180deg,var(--bg-1),var(--bg-2));
    font-family:Inter, system-ui, Arial, sans-serif;
    color:var(--text);
    padding-top:var(--nav-h);
    transition:all .28s ease;
    line-height:1.5;
  }

  /* NAV */
  nav{
    position:fixed;top:0;left:0;right:0;height:var(--nav-h);
    display:flex;align-items:center;z-index:1200;
    background:linear-gradient(180deg, rgba(6,8,12,0.55), rgba(6,8,12,0.35));
    backdrop-filter:blur(6px);
    border-bottom:1px solid rgba(255,255,255,0.03);
  }
  .nav-inner{
    max-width:1200px;margin:0 auto;padding:0 20px;display:flex;align-items:center;width:100%;
  }
  .brand{
    font-size:18px;font-weight:800;text-decoration:none;
    color:var(--text);display:flex;gap:10px;align-items:center
  }
  .brand .logo{
    width:12px;height:12px;border-radius:4px;
    background:linear-gradient(90deg,var(--accent-a),var(--accent-b))
  }
  .nav-links{margin-left:auto;display:flex;gap:10px;align-items:center}
  .nav-links a{
    color:var(--muted);padding:8px 10px;border-radius:8px;
    text-decoration:none;font-weight:700;font-size:14px
  }
  .nav-links a.active,.nav-links a:hover{
    background:rgba(255,255,255,0.03);color:var(--text)
  }

  .toggle{
    width:46px;height:24px;background:rgba(255,255,255,0.04);
    padding:3px;border-radius:999px;cursor:pointer;display:flex;align-items:center;margin-left:12px
  }
  .knob{width:18px;height:18px;border-radius:50%;background:white;transition:transform .22s}
  body.light .knob{transform:translateX(20px)}

  .wrap{max-width:1200px;margin:36px auto;padding:18px;}

  /* HERO title gradient for both themes */
  .hero-title{
    font-size: 34px;
    font-weight: 800;
    line-height: 1.05;
    background: linear-gradient(90deg, #ff6b6b 0%, #7c5cff 52%, #00d4ff 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 2px 4px rgba(0,0,0,0.35);
  }
  body.light .hero-title{
    background: linear-gradient(90deg, #ff4b4b 0%, #8458ff 52%, #0096ff 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 1px 2px rgba(255,255,255,0.25);
  }

  /* HERO & layout */
  .hero-grid{display:grid;grid-template-columns:1fr 420px;gap:26px;align-items:center}
  .card{
    background:var(--panel);
    border-radius:var(--radius);
    padding:var(--card-pad);
    border:1px solid rgba(255,255,255,0.05);
    box-shadow:0 18px 50px rgba(0,0,0,0.45);
  }

  .hero-lead{margin-top:12px;color:var(--muted);max-width:68ch}
  .badges{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
  .badge{padding:6px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.05);font-weight:700;background:transparent;color:var(--text);font-size:13px}
  .hero-cta{margin-top:18px;display:flex;gap:12px;flex-wrap:wrap}
  .btn-primary{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));padding:12px 18px;border-radius:12px;color:#071022;font-weight:900;text-decoration:none;display:inline-block}
  .btn-outline{padding:12px 18px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);font-weight:700;color:var(--text);text-decoration:none}

  .photo-panel{display:flex;justify-content:center;align-items:center}
  .avatar-frame{width:320px;height:320px;padding:12px;border-radius:20px;background:linear-gradient(135deg, rgba(124,92,255,0.06), rgba(0,212,255,0.06));box-shadow:0 18px 40px rgba(0,0,0,0.5)}
  .avatar{width:100%;height:100%;border-radius:14px;overflow:hidden}
  .avatar img{width:100%;height:100%;object-fit:cover}

  /* Projects (grid) */
  .projects{margin-top:32px}
  .projects .skills-title{margin-bottom:12px}
  .project-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-top:14px}
  .project h3{margin:0;font-size:18px}
  .meta{font-size:13px;color:var(--muted);margin-top:6px}
  .project p{margin-top:10px;color:var(--muted)}

  /* Skills Option C */
  .skills-section{margin-top:32px}
  .skills-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px;align-items:stretch}
  .skill-card{border-radius:12px;padding:18px;display:flex;flex-direction:column;gap:12px;min-height:360px;border:1px solid rgba(255,255,255,0.03)}
  .skill-card.left{background:linear-gradient(180deg,rgba(255,255,255,0.012),rgba(255,255,255,0.008))}
  .skill-card.right{background:linear-gradient(180deg,rgba(0,212,255,0.022),rgba(124,92,255,0.01))}
  .skill-row{display:flex;gap:12px;align-items:center;margin-bottom:12px}
  .skill-name{width:170px;color:var(--muted);font-weight:700}
  .skill-track{flex:1;height:14px;border-radius:999px;background:rgba(255,255,255,0.04);overflow:hidden}
  .skill-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent-b),var(--accent-c));transition:width 1.2s}
  .skill-val{width:56px;text-align:right;font-weight:800;color:var(--accent-c)}
  .skill-card.right .skill-name{color:#d5eefc}

  /* NEW: Featured Case Studies horizontal slider */
  .case-section{margin-top:28px}
  .case-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .case-header h2{margin:0}
  .case-wrapper{overflow:hidden;position:relative;margin-top:12px}
  .case-track{display:flex;gap:16px;transition:transform .48s cubic-bezier(.2,.9,.2,1)}
  .case-card{min-width:340px;max-width:340px;flex-shrink:0;border-radius:12px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.03)}
  .case-card h3{margin:0 0 6px 0}
  .case-nav{display:flex;gap:8px;align-items:center}
  .case-arrow{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    color:var(--text);
    width:44px;height:44px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;
    cursor:pointer;backdrop-filter:blur(6px);
  }
  .case-arrow:active{transform:translateY(1px)}
  .case-dots{display:flex;gap:8px;align-items:center}
  .case-dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,0.05);opacity:0.5}
  .case-dot.active{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));opacity:1}

  /* Slideshow (bottom) */
  .slideshow{margin-top:22px;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);position:relative}
  .slides{display:flex;transition:transform .45s}
  .slide{min-width:100%;padding:18px;box-sizing:border-box}
  .color-box{height:200px;border-radius:10px;background:linear-gradient(120deg, rgba(124,92,255,0.2), rgba(0,212,255,0.18))}

  .slide-dots{display:flex;gap:8px;justify-content:center;padding:12px}
  .dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.06);cursor:pointer;opacity:0.45}
  .dot.active{opacity:1;background:linear-gradient(90deg,var(--accent-a),var(--accent-b))}

  .slide-arrow{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;
    background:rgba(0,0,0,0.35);backdrop-filter:blur(4px);cursor:pointer;border:1px solid rgba(255,255,255,0.04)}
  .slide-arrow.left{left:12px}
  .slide-arrow.right{right:12px}
  .slide-arrow svg{width:18px;height:18px;fill:var(--text);opacity:0.95}

  /* contact / footer */
  .contact-grid{display:grid;grid-template-columns:1fr 360px;gap:16px;margin-top:20px}
  .small{color:var(--muted)}
  .floating{position:fixed;right:18px;bottom:18px;display:flex;gap:10px;background:rgba(255,255,255,0.04);padding:12px;border-radius:12px;backdrop-filter:blur(6px)}
  .floating img{width:48px;height:48px;border-radius:10px;object-fit:cover}
  footer{text-align:center;color:var(--muted);margin:36px 0;font-size:14px}

  @media(max-width:980px){
    .hero-grid{grid-template-columns:1fr;}
    .skills-grid{grid-template-columns:1fr}
    .contact-grid{grid-template-columns:1fr}
    .nav-links{display:none}
    .skill-name{width:140px}
    .avatar-frame{width:220px;height:220px}
    .case-card{min-width:86vw;max-width:86vw}
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-inner">
    <a class="brand" href="#home"><span class="logo"></span> Vipul G Patil</a>
    <div class="nav-links">
      <a href="#home" class="active">Home</a>
      <a href="#projects">Projects</a>
      <a href="#skills">Skills</a>
      <a href="#timeline">Experience</a>
      <a href="#certifications">Certifications</a>
      <a href="#contact">Contact</a>
    </div>
    <div class="toggle" id="themeToggle" role="button" tabindex="0" aria-label="Toggle theme"><div class="knob"></div></div>
  </div>
</nav>

<div class="wrap">

  <!-- HERO -->
  <section id="home" class="hero-grid">
    <div class="card">
      <div class="hero-title">Transforming complex data into actionable intelligence.</div>

      <div class="hero-lead">
        I'm Vipul G Patil — Senior Data Engineer & Data Professional specializing in Power BI, SQL, ETL and Python automation.
        I build high-impact dashboards, automate workflows, and optimize data systems for performance and accuracy.
      </div>

      <div class="badges" aria-hidden="false">
        <span class="badge">Power BI</span>
        <span class="badge">SQL Server</span>
        <span class="badge">SSIS / ETL</span>
        <span class="badge">Python</span>
        <span class="badge">DAX</span>
        <span class="badge">Azure Data Factory</span>
      </div>

      <div class="hero-cta">
        <a class="btn-primary" href="#projects">View Work</a>
        <a class="btn-outline" id="resumeBtn" href="resume.pdf" download>Download Resume</a>
      </div>
    </div>

    <div class="card photo-panel">
      <div class="avatar-frame">
        <div class="avatar"><img src="avatar.png" alt="Vipul G Patil"></div>
      </div>
    </div>
  </section>

  <!-- Featured Case Studies (horizontal slider with arrows) -->
  <section id="projects" class="case-section">
    <div class="case-header">
      <h2 class="skills-title">Featured Case Studies</h2>
      <div class="case-nav">
        <button class="case-arrow" id="casePrev" aria-label="Previous case">&#10094;</button>
        <button class="case-arrow" id="caseNext" aria-label="Next case">&#10095;</button>
      </div>
    </div>

    <div class="case-wrapper">
      <div class="case-track" id="caseTrack">
        <div class="case-card card">
          <h3>TouchWorks Analytics — KPI & Workflow Dashboards</h3>
          <div class="meta">Power BI • SSIS • SQL</div>
          <p>Built interactive KPI dashboards with drill-through and row-level filters. Automated nightly ETL that reduced reporting latency by 60% and improved decision speed.</p>
        </div>

        <div class="case-card card">
          <h3>Enterprise Data Migration & Validation</h3>
          <div class="meta">ETL • Mapping • Data Quality</div>
          <p>Led migration of legacy datasets with validation pipelines and reconciliation reports. Introduced automated checks that caught 98% of inconsistent records before go-live.</p>
        </div>

        <div class="case-card card">
          <h3>Reporting Automation Framework</h3>
          <div class="meta">Python • SQL Jobs • Monitoring</div>
          <p>Designed scheduler & monitoring for recurring reporting jobs, including alerts and data-quality dashboards—cutting manual effort by 70%.</p>
        </div>

        <div class="case-card card">
          <h3>Sales Performance & Forecasting</h3>
          <div class="meta">Power BI • Time Series • SQL</div>
          <p>Developed a sales dashboard with month-over-month and rolling forecasts, enabling the business to identify underperforming regions and optimize inventory.</p>
        </div>

        <div class="case-card card">
          <h3>ETL Optimization & SQL Tuning</h3>
          <div class="meta">T-SQL • Indexing • Query Tuning</div>
          <p>Rewrote heavy queries, added targeted indexing, and parallelized ETL steps—improving ETL runtime by 55% and lowering DB CPU usage.</p>
        </div>

        <div class="case-card card">
          <h3>Casebook (PDF)</h3>
          <div class="meta">Compiled deliverables • Reports</div>
          <p>Download a consolidated casebook & sample deliverables (PDF). <a href="/mnt/data/resume.pdf" target="_blank" style="color:var(--accent-c)">Open PDF</a></p>
        </div>
      </div>
    </div>

    <div style="display:flex;justify-content:center;margin-top:12px;gap:8px" id="caseDots"></div>
  </section>

  <!-- Skills -->
  <section id="skills" class="skills-section">
    <div class="skills-title">Skills & Tools (with proficiency)</div>
    <div class="skills-grid">
      <div class="skill-card left card" aria-labelledby="left-title">
        <div id="left-title" class="skill-section-title">Core Analytics & BI</div>
        <div class="skill-row"><div class="skill-name">Power BI</div><div class="skill-track"><div class="skill-fill" data-fill="92"></div></div><div class="skill-val">92%</div></div>
        <div class="skill-row"><div class="skill-name">SQL & Optimization</div><div class="skill-track"><div class="skill-fill" data-fill="95"></div></div><div class="skill-val">95%</div></div>
        <div class="skill-row"><div class="skill-name">DAX (Power BI)</div><div class="skill-track"><div class="skill-fill" data-fill="89"></div></div><div class="skill-val">89%</div></div>
        <div class="skill-row"><div class="skill-name">SSIS / ETL</div><div class="skill-track"><div class="skill-fill" data-fill="90"></div></div><div class="skill-val">90%</div></div>
        <div class="skill-row"><div class="skill-name">SSRS (Reporting)</div><div class="skill-track"><div class="skill-fill" data-fill="85"></div></div><div class="skill-val">85%</div></div>
        <div style="margin-top:auto;color:var(--muted);font-size:13px">Other notable: Visualization design, KPI definition, dashboard UX</div>
      </div>

      <div class="skill-card right card" aria-labelledby="right-title">
        <div id="right-title" class="skill-section-title">Cloud, Automation & Engineering</div>
        <div class="skill-row"><div class="skill-name">Azure Data Factory</div><div class="skill-track"><div class="skill-fill" data-fill="80"></div></div><div class="skill-val">80%</div></div>
        <div class="skill-row"><div class="skill-name">Azure SQL / Synapse</div><div class="skill-track"><div class="skill-fill" data-fill="85"></div></div><div class="skill-val">85%</div></div>
        <div class="skill-row"><div class="skill-name">Data Modeling</div><div class="skill-track"><div class="skill-fill" data-fill="90"></div></div><div class="skill-val">90%</div></div>
        <div class="skill-row"><div class="skill-name">Python (Pandas)</div><div class="skill-track"><div class="skill-fill" data-fill="82"></div></div><div class="skill-val">82%</div></div>
        <div class="skill-row"><div class="skill-name">Git & Version Control</div><div class="skill-track"><div class="skill-fill" data-fill="78"></div></div><div class="skill-val">78%</div></div>
        <div class="skill-row"><div class="skill-name">API Integration</div><div class="skill-track"><div class="skill-fill" data-fill="75"></div></div><div class="skill-val">75%</div></div>
        <div class="skill-row"><div class="skill-name">Power Automate</div><div class="skill-track"><div class="skill-fill" data-fill="80"></div></div><div class="skill-val">80%</div></div>
        <div style="margin-top:auto;color:var(--muted);font-size:13px">Tools & Libraries: Pandas, NumPy, SSMS, Azure Data Studio</div>
      </div>
    </div>
  </section>

  <!-- Slideshow (kept for larger hero samples) -->
  <section style="margin-top:32px;">
    <h2 class="skills-title">Project Slideshow</h2>
    <div class="slideshow card" id="slideshowWrap">
      <div class="slides" id="slides">
        <div class="slide">
          <h4>TouchWorks — KPI Dashboards</h4>
          <p class="small">Real-time insights and workflow tracking.</p>
          <div class="color-box"></div>
        </div>

        <div class="slide">
          <h4>Data Migration — Validation Suite</h4>
          <p class="small">Automated data checks and reconciliation tools.</p>
          <div class="color-box" style="background:linear-gradient(120deg, rgba(124,92,255,0.2), rgba(0,212,255,0.12))"></div>
        </div>

        <div class="slide">
          <h4>Reporting Automation Engine</h4>
          <p class="small">Scheduler, monitoring and alerting for recurring reports.</p>
          <div class="color-box" style="background:linear-gradient(120deg, rgba(0,212,255,0.2), rgba(255,107,107,0.12))"></div>
        </div>
      </div>

      <div class="slide-arrow left" id="slidePrev" title="Previous">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
      </div>
      <div class="slide-arrow right" id="slideNext" title="Next">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
      </div>

      <div class="slide-dots" id="slideDots">
        <div class="dot" data-i="0"></div>
        <div class="dot" data-i="1"></div>
        <div class="dot" data-i="2"></div>
      </div>
    </div>
  </section>

  <!-- Experience -->
  <section id="timeline" style="margin-top:32px;">
    <h2 class="skills-title">Experience Timeline</h2>
    <div class="timeline">
      <div class="timeline-item">
        <h4>Senior Systems Analyst — Altera Digital Health</h4>
        <div class="date">2024 — Present</div>
        <p class="small">Leading BI development, ETL pipelines, and enterprise analytics implementations.</p>
      </div>

      <div class="timeline-item">
        <h4>Systems Analyst — Altera Digital Health</h4>
        <div class="date">2021 — 2024</div>
        <p class="small">Optimized SQL systems, automated ETL workflows and maintained mission-critical reporting.</p>
      </div>

      <div class="timeline-item">
        <h4>Associate Systems Analyst — Altera Digital Health</h4>
        <div class="date">2019 — 2021</div>
        <p class="small">Designed SSIS packages, SQL jobs and supported teams with data insights.</p>
      </div>
    </div>
  </section>

  <!-- Certifications -->
  <section id="certifications" style="margin-top:32px;">
    <h2 class="skills-title">Certifications & Recognition</h2>
    <div class="card" style="margin-top:12px">
      <p class="small" style="color:var(--muted)">Professional certifications relevant to analytics, BI and cloud fundamentals:</p>
      <div class="cert-list" style="margin-top:12px">
        <span class="cert-badge">Microsoft Power BI Data Analyst (PL-300)</span>
        <span class="cert-badge">Azure Fundamentals (AZ-900)</span>
        <span class="cert-badge">SQL Server Exams (70-761 &amp; 70-762)</span>
        <span class="cert-badge">MCSA</span>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" style="margin-top:32px;">
    <h2 class="skills-title">Contact</h2>
    <div class="contact-grid">
      <div class="card">
        <p class="small">If you’d like to collaborate, hire, or discuss data challenges, feel free to reach out.</p>
        <p style="margin-top:12px">
          <strong>Email:</strong> <a href="mailto:contactvipulgpatil@gmail.com" style="color:var(--accent-c)">contactvipulgpatil@gmail.com</a><br>
          <strong>Mobile:</strong> <a href="tel:+919601291584" style="color:var(--accent-c)">+91-96012-91584</a><br>
          <strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/vipul-patil-a95349159" target="_blank" style="color:var(--accent-c)">linkedin.com/in/vipul-patil</a>
        </p>
      </div>

      <div class="card">
        <h3 style="margin:0">Resume</h3>
        <p class="small">Click below to download my resume.</p>
        <a id="downloadResume" class="btn-primary" href="resume.pdf" download style="display:inline-block;margin-top:12px">Download Resume</a>
        <p class="small" style="margin-top:10px;color:var(--muted)">If download fails, ensure <code>resume.pdf</code> is uploaded to your repository root (same folder as index.html).</p>
      </div>
    </div>
  </section>

  <footer>© 2025 Vipul G Patil — Transforming complex data into actionable intelligence.</footer>
</div>

<!-- Floating contact -->
<div class="floating" aria-hidden="false">
  <img src="avatar.png" alt="Vipul">
  <div>
    <strong>Vipul G Patil</strong><br>
    <span class="small">Senior Data Engineer & Data Professional</span><br>
    <div style="margin-top:8px;display:flex;gap:8px">
      <a class="btn-primary" href="mailto:contactvipulgpatil@gmail.com" style="padding:8px 10px;font-size:13px">Email</a>
      <a class="btn-outline" href="resume.pdf" download style="padding:8px 10px;font-size:13px">Resume</a>
    </div>
  </div>
</div>

<script>
  /* ===== Theme toggle ===== */
  (function(){
    const toggle = document.getElementById('themeToggle');
    const knob = toggle && toggle.querySelector('.knob');
    const saved = localStorage.getItem('site-theme');
    if (saved === 'light') document.body.classList.add('light'), knob && (knob.style.transform='translateX(20px)');
    toggle && toggle.addEventListener('click', () => {
      document.body.classList.toggle('light');
      const isLight = document.body.classList.contains('light');
      knob && (knob.style.transform = isLight ? 'translateX(20px)' : 'translateX(0)');
      localStorage.setItem('site-theme', isLight ? 'light' : 'dark');
    });
    toggle && toggle.addEventListener('keydown', (e) => { if(e.key === 'Enter') toggle.click(); });
  })();

  /* ===== Skill bars animation ===== */
  (function(){
    const fills = document.querySelectorAll('.skill-fill');
    const io = new IntersectionObserver(entries => {
      entries.forEach(en => {
        if (en.isIntersecting) {
          const el = en.target;
          const val = el.dataset.fill || '0';
          el.style.width = val + '%';
          io.unobserve(el);
        }
      });
    }, { threshold: 0.25 });
    fills.forEach(f => io.observe(f));
  })();

  /* ===== Case Studies slider (horizontal cards) ===== */
  (function(){
    const track = document.getElementById('caseTrack');
    const cards = track ? Array.from(track.querySelectorAll('.case-card')) : [];
    const prevBtn = document.getElementById('casePrev');
    const nextBtn = document.getElementById('caseNext');
    const dotsWrap = document.getElementById('caseDots');

    if (!track || !cards.length) return;

    let visibleCount = 3;
    const resizeHandler = () => {
      const w = window.innerWidth;
      if (w < 600) visibleCount = 1;
      else if (w < 980) visibleCount = 2;
      else visibleCount = 3;
      createDots();
      // ensure index is in range
      index = Math.max(0, Math.min(index, Math.max(0, cards.length - visibleCount)));
      update();
    };

    let index = 0;
    const cardGap = 16;
    let cardWidth = cards[0].getBoundingClientRect().width;
    function updateCardWidth(){ cardWidth = cards[0].getBoundingClientRect().width + cardGap; }

    function update(){
      updateCardWidth();
      const x = index * cardWidth;
      track.style.transform = `translateX(-${x}px)`;
      updateDots();
    }

    function createDots(){
      if (!dotsWrap) return;
      dotsWrap.innerHTML = '';
      const pages = Math.max(1, Math.ceil(cards.length - (visibleCount - 1)));
      for (let i=0;i<pages;i++){
        const d = document.createElement('div');
        d.className = 'case-dot';
        d.dataset.i = i;
        d.style.cursor = 'pointer';
        d.addEventListener('click', ()=> {
          index = i;
          update();
        });
        dotsWrap.appendChild(d);
      }
    }

    function updateDots(){
      if (!dotsWrap) return;
      const dots = Array.from(dotsWrap.children);
      dots.forEach((d, i) => d.classList.toggle('active', i === index));
    }

    prevBtn && prevBtn.addEventListener('click', ()=> {
      index = Math.max(0, index - 1);
      update();
      restartAuto();
    });
    nextBtn && nextBtn.addEventListener('click', ()=> {
      index = Math.min(cards.length - visibleCount, index + 1);
      update();
      restartAuto();
    });

    // swipe support
    let startX = 0, currentX = 0, isDown = false;
    track.addEventListener('pointerdown', (e)=>{
      isDown = true;
      startX = e.clientX;
      track.style.transition = 'none';
      track.setPointerCapture && track.setPointerCapture(e.pointerId);
      stopAuto();
    });
    track.addEventListener('pointermove', (e)=>{
      if(!isDown) return;
      currentX = e.clientX;
      const dx = currentX - startX;
      track.style.transform = `translateX(-${index * cardWidth - dx}px)`;
    });
    track.addEventListener('pointerup', (e)=>{
      if(!isDown) return;
      isDown = false;
      const dx = e.clientX - startX;
      track.style.transition = '';
      if (Math.abs(dx) > 60) {
        if (dx < 0) index = Math.min(cards.length - visibleCount, index + 1);
        else index = Math.max(0, index - 1);
      }
      update();
      startAuto();
    });
    track.addEventListener('pointercancel', ()=>{
      isDown = false;
      update();
      startAuto();
    });

    // autoplay
    let autoTimer;
    function startAuto(){
      stopAuto();
      autoTimer = setInterval(()=> {
        index = (index + 1) > (cards.length - visibleCount) ? 0 : index + 1;
        update();
      }, 5500);
    }
    function stopAuto(){ if (autoTimer) { clearInterval(autoTimer); autoTimer = null; } }
    function restartAuto(){ stopAuto(); startAuto(); }

    // init
    window.addEventListener('resize', resizeHandler);
    resizeHandler();
    update();
    startAuto();
  })();

  /* ===== Slideshow (bottom) ===== */
  (function(){
    const slides = document.getElementById('slides');
    const dots = Array.from(document.querySelectorAll('.dot'));
    const prevBtn = document.getElementById('slidePrev');
    const nextBtn = document.getElementById('slideNext');
    let idx = 0;
    const total = slides.children.length;
    let timer;

    function show(i){
      idx = (i + total) % total;
      slides.style.transform = `translateX(-${idx*100}%)`;
      dots.forEach((d, j) => d.classList.toggle('active', j === idx));
    }
    function startTimer(){ timer = setInterval(()=> show(idx+1), 5000); }
    function stopTimer(){ clearInterval(timer); }

    dots.forEach((d, j) => d.addEventListener('click', ()=> { stopTimer(); show(j); startTimer(); }));
    prevBtn && prevBtn.addEventListener('click', ()=> { stopTimer(); show(idx-1); startTimer(); });
    nextBtn && nextBtn.addEventListener('click', ()=> { stopTimer(); show(idx+1); startTimer(); });
    slides.addEventListener('mouseenter', stopTimer);
    slides.addEventListener('mouseleave', startTimer);

    show(0);
    startTimer();
  })();

  /* ===== Active nav highlighting ===== */
  (function(){
    const navLinks = Array.from(document.querySelectorAll('.nav-links a'));
    const sections = Array.from(document.querySelectorAll('section[id]'));
    function update(){
      const offset = window.scrollY + 140;
      let current = 'home';
      sections.forEach(s => { if(s.offsetTop <= offset) current = s.id; });
      navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + current));
    }
    window.addEventListener('scroll', update, {passive:true});
    update();
  })();

  /* ===== Resume download robust behavior ===== */
  (function(){
    const primary = 'resume.pdf';
    const btn = document.getElementById('downloadResume');
    const fallbackHref = btn ? btn.getAttribute('href') : 'resume.pdf';

    async function tryFetch(url){
      try {
        const resp = await fetch(url, { method: 'GET' });
        if (!resp.ok) throw new Error('status ' + resp.status);
        const blob = await resp.blob();
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'Vipul_Patil_Resume.pdf';
        document.body.appendChild(link);
        link.click();
        link.remove();
        return true;
      } catch (e) {
        return false;
      }
    }

    async function fetchAndDownload(){
      if (await tryFetch(primary)) return;
      alert('Resume not found on server. Attempting fallback link.');
      window.open(fallbackHref, '_blank');
    }

    btn && btn.addEventListener('click', function(e){
      e.preventDefault();
      fetchAndDownload();
    });
  })();

  /* ===== Smooth anchor scroll (offset for fixed nav) ===== */
  (function(){
    const anchors = document.querySelectorAll('a[href^="#"]');
    anchors.forEach(a=>{
      a.addEventListener('click', function(e){
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          e.preventDefault();
          const y = target.getBoundingClientRect().top + window.scrollY - 84;
          window.scrollTo({ top: y, behavior: 'smooth' });
        }
      });
    });
  })();
</script>
</body>
</html>
